mixin table-tree(items, level = 1)
    each item, index in items
        tr.text-center.align-middle
            td
                input.form-check-input(type="checkbox" name="id" value=item.id)
            td.text-start
                span(style=`margin-left:${(level - 1) * 15}px`)
                    if level > 1
                        i(class="fa-solid fa-angles-right text-secondary me-1")
                    | #{item.title}
            td
                input.form-control.form-control-sm.text-center.mx-auto(
                    type="number"
                    value=item.position
                    min="1"
                    name="position"
                    style="width:60px"
                )
            td
                if (role.permissions.includes("products-category_edit"))
                    if (item.status == "active")
                        span.badge.bg-success.text-white.px-2.py-1(
                            button-change-status
                            data-status=item.status
                            data-id=item._id
                            data-parent-id=item.parent_id
                            style="cursor:pointer"
                        )
                            i.fa-solid.fa-circle-check.me-1
                            | Hoạt động
                    else
                        span.badge.bg-danger.text-white.px-2.py-1(
                            button-change-status
                            data-status=item.status
                            data-id=item._id
                            data-parent-id=item.parent_id
                            style="cursor:pointer"
                        )
                            i.fa-solid.fa-circle-xmark.me-1
                            | Dừng hoạt động
                else
                    span.text-muted #{item.status}

            td.small.text-muted
                p.mb-0.fw-semibold #{item.accountFullName}
                p.mb-0 #{moment(item.createdBy.createdAt).format("DD/MM/YYYY HH:mm:ss")}
            td.small.text-muted
                - const updateBy = item.updatedBy.slice(-1)[0]
                if updateBy
                    p.mb-0.fw-semibold #{updateBy.accountFullName}
                    p.mb-0 #{moment(updateBy.updatedAt).format("DD/MM/YYYY HH:mm:ss")}
                else
                    span.text-muted Chưa cập nhật
            td.text-nowrap
                a.btn.btn-sm.btn-outline-secondary.me-1(
                    href=`${prefixAdmin}/products-category/detail/${item.id}`
                    title="Chi tiết"
                )
                    i.fa-solid.fa-eye
                if(role.permissions.includes("products-category_edit"))
                    a.btn.btn-sm.btn-outline-warning.me-1(
                        href=`${prefixAdmin}/products-category/edit/${item.id}`
                        title="Chỉnh sửa"
                    )
                        i.fa-solid.fa-pen-to-square
                if(role.permissions.includes("products-category_delete"))
                    a.btn.btn-sm.btn-outline-danger(
                        href="#"
                        button-delete
                        data-id=item.id
                        title="Xoá"
                    )
                        i.fa-solid.fa-trash
        if item.children && item.children.length > 0
            +table-tree(item.children, level + 1)
